<div id="wrapper">
  <div id="anotherwrapper">
      <img id="headerimg" src="hellothere.jpg" alt="hello there">
    <div id="chat">
        <div id="messagebox">
            <div id="message-inner-box">
                <ul id="messages">
                    <li><b>server</b>: Welcome!!</li>
                </ul>
            </div>
        </div>
        <div id="online">
            <p>Online:</p>
            <ul id="people">
                <li><p>Carol Chen</p></li>
                <li><p>Jill Xu</p></li>
            </ul>
        </div>
        <div id="textbox">
            <form action="">
                <input id="m" autocomplete="off" type="text" name="chat" value="">
            </form>
        </div>
        <div id="options">
            <a href="/leaderboard">leaderboard</a>
            <a href="/logout">logout</a>
        </div>
    </div>
  </div>
</div>
<script>
let name = document.createElement('b');
name.innerHTML = '{{inSession}}';
  $(function () {
    const socket = io();
    $('form').submit(function(){
      const $cont = $('#message-inner-box');
      $cont[0].scrollTop = $cont[0].scrollHeight;
      socket.emit('chat message', '<b>{{inSession}}</b>' + ": " + $('#m').val());
      $('#m').val('');
      $('#m').keyup(function(e) {
          if (e.keyCode === 13) {
              //$cont.append('<li>' + $(this).val() + '</li>');
              $cont[0].scrollTop = $cont[0].scrollHeight;
              //$('#m').val('');
          }
      })
      .focus();
      return false;
    });
    socket.on('chat message', function(msg){
      $('#messages').append($('<li>').html(msg));
    });
    //notify when connected?
    var chat = io.connect('/')
    chat.on('connect', function () {
      chat.emit('hi!');
    });
  });
</script>
